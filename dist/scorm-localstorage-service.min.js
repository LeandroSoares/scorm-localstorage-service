"use strict";var QUIZES="quizes",STATUS={PASSED:"passed",COMPLETED:"completed",FAILED:"failed",INCOMPLETE:"incomplete",BROWSED:"browsed",NOT_ATTEMPTED:"not attempted"},SCORM_API={SUSPEND_DATA:"cmi.suspend_data",LESSON_STATUS:"cmi.core.lesson_status",LESSON_LOCATION:"cmi.core.lesson_location",SCORE:"cmi.core.score.raw"};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var LocstorService=function(){function e(){_classCallCheck(this,e),this.name="localStorage"}return _createClass(e,[{key:"init",value:function(){return!0}},{key:"get",value:function(e){return localStorage.getItem(e)}},{key:"set",value:function(e,t){return localStorage.setItem(e,t),!0}},{key:"getObject",value:function(e){return JSON.parse(this.get(e))}},{key:"setObject",value:function(e,t){return this.set(e,JSON.stringify(t)),!0}},{key:"save",value:function(){return console.log("trying to save..."),!0}},{key:"quit",value:function(){console.log("trying to quit...")}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var PersistanceFake=function(){function e(){_classCallCheck(this,e),this.name="PersistanceFake",this.db={},console.log("%c* Persistance - ".concat(this.persistance.name," * "),"font-weight:bold; color:purple")}return _createClass(e,[{key:"init",value:function(){return!0}},{key:"get",value:function(e){return this.db[e]}},{key:"set",value:function(e,t){this.db[e]=t,console.log("PersistanceFake >>",e,t)}},{key:"save",value:function(){return!0}},{key:"quit",value:function(){return console.log("PersistanceFake >> quit"),!0}},{key:"getObject",value:function(e){return this.get(e)}},{key:"setObject",value:function(e,t){this.set(e,t)}},{key:"saveObject",value:function(e,t){var n=this.getObject(SCORM_API.SUSPEND_DATA)||{};n[e]=t,this.setObject(SCORM_API.SUSPEND_DATA,n)}},{key:"loadObject",value:function(e){return(this.getObject(SCORM_API.SUSPEND_DATA)||{})[e]}},{key:"saveQuiz",value:function(e,t){var n=this.loadObject(QUIZES)||{};n[e]=t,this.saveObject(QUIZES,n)}},{key:"loadQuiz",value:function(e){return(this.loadObject(QUIZES)||{})[e]}},{key:"getQuizCollection",value:function(){return this.loadObject(QUIZES)}},{key:"setCompleted",value:function(){this.setLessonStatus(STATUS.COMPLETED)}},{key:"setLessonStatus",value:function(e){this.set(SCORM_API.LESSON_STATUS,e)}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var PersistanceService=function(){function n(e,t){_classCallCheck(this,n),this.scorm=e,this.locstor=t,this.persistance=this.scorm.ready?this.scorm:this.locstor,console.log("%c* Persistance - ".concat(this.persistance.name," * "),"font-weight:bold; color:purple")}return _createClass(n,null,[{key:"Create",value:function(){return new n(new ScormAPIService,new LocstorService)}}]),_createClass(n,[{key:"init",value:function(){return this.persistance.init()}},{key:"get",value:function(e){return this.persistance.get(e)}},{key:"set",value:function(e,t){return this.persistance.set(e,t)}},{key:"save",value:function(){return this.persistance.save()}},{key:"quit",value:function(){this.persistance.quit()}},{key:"getObject",value:function(e){return this.persistance.getObject(e)}},{key:"setObject",value:function(e,t){return this.persistance.setObject(e,t)}},{key:"saveObject",value:function(e,t){var n=this.persistance.getObject(SCORM_API.SUSPEND_DATA)||{};n[e]=t,this.persistance.setObject(SCORM_API.SUSPEND_DATA,n)}},{key:"loadObject",value:function(e){return(this.persistance.getObject(SCORM_API.SUSPEND_DATA)||{})[e]}},{key:"saveQuiz",value:function(e,t){var n=this.loadObject(QUIZES)||{};n[e]=t,this.saveObject(QUIZES,n)}},{key:"loadQuiz",value:function(e){return(this.loadObject(QUIZES)||{})[e]}},{key:"getQuizCollection",value:function(){return this.loadObject(QUIZES)}},{key:"setCompleted",value:function(){this.setLessonStatus(STATUS.COMPLETED)}},{key:"setLessonStatus",value:function(e){this.set(SCORM_API.LESSON_STATUS,e)}}]),n}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var ScormAPIService=function(){function e(){_classCallCheck(this,e),this.name="scorm",this.scorm=pipwerks.SCORM,this.ready=this.init()}return _createClass(e,[{key:"saveData",value:function(e,t){this.suspend_data[e]=t,this.set(SCORM_API.SUSPEND_DATA,JSON.stringify(this.suspend_data))}},{key:"getData",value:function(e){return this.suspend_data[e]}},{key:"init",value:function(){return this.scorm.init()}},{key:"get",value:function(e){return this.scorm.get(e)}},{key:"set",value:function(e,t){var n=this.scorm.set(e,t);return this.scorm.save(),n}},{key:"getObject",value:function(e){return JSON.parse(this.get(e)||"{}")}},{key:"setObject",value:function(e,t){return this.set(e,JSON.stringify(t))}},{key:"save",value:function(){return this.scorm.save()}},{key:"quit",value:function(){this.scorm.quit()}}]),e}();
//# sourceMappingURL=scorm-localstorage-service.min.js.map
